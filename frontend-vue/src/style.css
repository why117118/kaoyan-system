/* ==================== 全局 Reset & Apple-style 基础 ==================== */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#f5f5f7;--card:#fff;--text:#1d1d1f;--sub:#6e6e73;
  --blue:#0071e3;--blue-hover:#0077ED;
  --green:#34c759;--red:#ff3b30;--orange:#ff9500;
  --radius:18px;--shadow:0 4px 24px rgba(0,0,0,.06);
  --nav-w:220px;
}
html{scroll-behavior:smooth}
body{font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  background:var(--bg);color:var(--text);line-height:1.5}

/* ==================== Hero Banner ==================== */
.hero{
  background:linear-gradient(135deg,#0071e3,#6e5ce6);
  color:#fff;text-align:center;padding:56px 24px 40px;
}
.hero h1{font-size:2rem;font-weight:700;letter-spacing:-.5px}
.hero p{opacity:.85;margin-top:6px;font-size:1rem}

/* ==================== Dashboard Layout ==================== */
.dashboard-wrap{display:flex;min-height:calc(100vh - 140px)}
.dashboard-left{
  width:var(--nav-w);position:fixed;top:0;left:0;bottom:0;
  background:#fff;border-right:1px solid #e5e5ea;
  display:flex;flex-direction:column;padding:24px 0 16px;z-index:100;
}
.dashboard-left .brand{
  font-size:1.1rem;font-weight:700;color:var(--blue);
  padding:0 20px 20px;border-bottom:1px solid #f0f0f0;
}
.nav-list{list-style:none;padding:12px 0;flex:1;overflow-y:auto}
.nav-item{
  display:flex;align-items:center;gap:10px;
  padding:10px 20px;cursor:pointer;border-radius:0;
  font-size:.93rem;color:var(--sub);transition:all .2s;
}
.nav-item:hover{background:#f5f5f7;color:var(--text)}
.nav-item.active{background:rgba(0,113,227,.08);color:var(--blue);font-weight:600}

.main-panel{
  margin-left:var(--nav-w);flex:1;
  padding:32px 40px 64px;max-width:1100px;
}
.section-title{font-size:1.3rem;font-weight:700;margin:32px 0 16px}

/* ==================== 首页欢迎卡片区 ==================== */
.welcome-grid{
  display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:20px;margin-bottom:32px;
}
.welcome-card{
  background:var(--card);border-radius:var(--radius);
  box-shadow:var(--shadow);padding:28px 24px;
  display:flex;flex-direction:column;gap:8px;
  transition:transform .25s,box-shadow .25s;cursor:pointer;
}
.welcome-card:hover{transform:translateY(-4px);box-shadow:0 8px 32px rgba(0,0,0,.10)}
.welcome-card .icon{font-size:2rem}
.welcome-card h3{font-size:1.05rem;font-weight:600}
.welcome-card p{font-size:.85rem;color:var(--sub)}

.subcard-grid{
  display:grid;grid-template-columns:1fr 1fr 1fr;
  gap:10px;margin-top:10px;
}
.sub-card{
  background:#f9f9fb;border-radius:12px;padding:12px 10px;
  text-align:center;font-size:.82rem;color:var(--blue);
  cursor:pointer;transition:background .2s;text-decoration:none;
}
.sub-card:hover{background:#eef2ff}

/* ==================== 通用卡片 ==================== */
.card{
  background:var(--card);border-radius:var(--radius);
  box-shadow:var(--shadow);padding:28px 24px;margin-bottom:24px;
}

/* ==================== Auth 登录/注册 ==================== */
.auth-wrap{
  display:flex;align-items:center;justify-content:center;
  min-height:100vh;background:linear-gradient(135deg,#0071e3,#6e5ce6);
}
.auth-card{
  background:#fff;border-radius:var(--radius);
  box-shadow:0 12px 48px rgba(0,0,0,.15);
  padding:48px 40px;width:380px;text-align:center;
}
.auth-card h2{font-size:1.5rem;font-weight:700;margin-bottom:8px}
.auth-card .subtitle{color:var(--sub);font-size:.9rem;margin-bottom:24px}
.auth-card input{
  width:100%;padding:12px 16px;border:1px solid #d2d2d7;
  border-radius:12px;font-size:.95rem;margin-bottom:14px;outline:none;
  transition:border .2s;
}
.auth-card input:focus{border-color:var(--blue)}
.auth-card .btn{
  width:100%;padding:13px;border:none;border-radius:12px;
  background:var(--blue);color:#fff;font-size:1rem;font-weight:600;
  cursor:pointer;transition:background .2s;
}
.auth-card .btn:hover{background:var(--blue-hover)}
.auth-card .toggle{margin-top:18px;font-size:.85rem;color:var(--sub);cursor:pointer}
.auth-card .toggle span{color:var(--blue);font-weight:600}

/* ==================== 个人资料 ==================== */
.profile-grid{display:grid;grid-template-columns:auto 1fr;gap:24px;align-items:start}
.avatar-col{text-align:center}
.avatar-img{
  width:80px;height:80px;border-radius:50%;object-fit:cover;
  border:3px solid var(--blue);
}
.avatar-placeholder{
  width:80px;height:80px;border-radius:50%;
  background:linear-gradient(135deg,#0071e3,#6e5ce6);
  color:#fff;display:flex;align-items:center;justify-content:center;
  font-size:2rem;font-weight:700;
}
.profile-form label{display:block;font-size:.85rem;color:var(--sub);margin-bottom:4px}
.profile-form input,.profile-form select{
  width:100%;padding:10px 14px;border:1px solid #d2d2d7;
  border-radius:12px;font-size:.93rem;margin-bottom:12px;outline:none;
}
.profile-form input:focus,.profile-form select:focus{border-color:var(--blue)}
.btn-blue{
  padding:10px 28px;border:none;border-radius:12px;
  background:var(--blue);color:#fff;font-size:.93rem;
  font-weight:600;cursor:pointer;transition:background .2s;
}
.btn-blue:hover{background:var(--blue-hover)}

/* ==================== 推荐 / 课程卡片 ==================== */
.course-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:18px}
.course-card{
  background:var(--card);border-radius:16px;
  box-shadow:var(--shadow);padding:22px 20px;
  display:flex;flex-direction:column;gap:6px;
  transition:transform .25s,box-shadow .25s;
}
.course-card:hover{transform:translateY(-3px);box-shadow:0 8px 32px rgba(0,0,0,.10)}
.course-card h4{font-size:.97rem;font-weight:600}
.course-card .meta{font-size:.82rem;color:var(--sub)}
.reason-tag{
  display:inline-block;padding:3px 10px;border-radius:20px;
  font-size:.75rem;background:#eef6ff;color:var(--blue);margin-top:4px;
}

.course-search{
  display:flex;gap:10px;margin-bottom:18px;flex-wrap:wrap;align-items:center;
}
.course-search input,.course-search select{
  padding:10px 16px;border:1px solid #d2d2d7;border-radius:12px;
  font-size:.93rem;outline:none;
}
.course-search input:focus,.course-search select:focus{border-color:var(--blue)}

.pagination{display:flex;gap:8px;margin-top:18px;justify-content:center;align-items:center;flex-wrap:wrap}
.pagination button{
  border:1px solid #d2d2d7;border-radius:10px;padding:6px 14px;
  background:#fff;font-size:.85rem;cursor:pointer;transition:all .2s;
}
.pagination button:hover{border-color:var(--blue);color:var(--blue)}
.pagination button.active{background:var(--blue);color:#fff;border-color:var(--blue)}
.pagination select{
  padding:6px 12px;border:1px solid #d2d2d7;border-radius:10px;
  font-size:.85rem;background:#fff;cursor:pointer;outline:none;
  transition:border-color .2s;
}
.pagination select:focus{border-color:var(--blue)}
.page-info{font-size:.85rem;color:#6e6e73}

/* ==================== 评估指标 ==================== */
.eval-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:14px;margin-top:14px}
.eval-cell{
  background:#f5f5f7;border-radius:14px;padding:18px;text-align:center;
}
.eval-cell .label{font-size:.82rem;color:var(--sub);margin-bottom:4px}
.eval-cell .value{font-size:1.3rem;font-weight:700;color:var(--blue)}

/* ==================== 学习计划 ==================== */
.plan-toolbar{display:flex;gap:10px;margin-bottom:16px;flex-wrap:wrap;align-items:center}
.plan-toolbar select,.plan-toolbar input{
  padding:8px 14px;border:1px solid #d2d2d7;border-radius:12px;font-size:.9rem;outline:none;
}
.plan-table{width:100%;border-collapse:separate;border-spacing:0 8px}
.plan-table th{text-align:left;font-size:.82rem;color:var(--sub);padding:0 12px 4px}
.plan-table td{
  background:#fafafa;padding:12px;font-size:.9rem;
}
.plan-table tr td:first-child{border-radius:12px 0 0 12px}
.plan-table tr td:last-child{border-radius:0 12px 12px 0}
.status-badge{
  display:inline-block;padding:3px 12px;border-radius:20px;font-size:.78rem;font-weight:600;
}
.status-badge.pending{background:#fff3e0;color:var(--orange)}
.status-badge.done{background:#e8f5e9;color:var(--green)}
.status-badge.in_progress{background:#e3f2fd;color:var(--blue)}

.plan-modal-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.35);
  display:flex;align-items:center;justify-content:center;z-index:1000;
}
.plan-modal{
  background:#fff;border-radius:var(--radius);padding:32px;
  width:420px;box-shadow:0 16px 48px rgba(0,0,0,.18);
}
.plan-modal h3{font-size:1.1rem;font-weight:700;margin-bottom:16px}
.plan-modal label{display:block;font-size:.85rem;color:var(--sub);margin-bottom:4px}
.plan-modal input,.plan-modal select,.plan-modal textarea{
  width:100%;padding:10px 14px;border:1px solid #d2d2d7;border-radius:12px;
  font-size:.93rem;margin-bottom:12px;outline:none;
}
.plan-modal textarea{resize:vertical;min-height:60px}
.plan-modal .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:8px}

/* ==================== 错题反馈 ==================== */
.wrong-list{display:flex;flex-direction:column;gap:12px}
.wrong-row{
  background:linear-gradient(135deg,#e8f0fe,#f5f8ff);
  border-radius:14px;padding:16px 20px;
  display:flex;justify-content:space-between;align-items:center;
  transition:transform .2s;
}
.wrong-row:hover{transform:translateX(4px)}
.wrong-row .info h4{font-size:.95rem;font-weight:600;margin-bottom:2px}
.wrong-row .info p{font-size:.82rem;color:var(--sub)}
.error-count{
  display:inline-block;background:var(--red);color:#fff;
  font-size:.75rem;font-weight:700;padding:2px 8px;border-radius:12px;
  margin-left:8px;
}
.btn-del{
  border:none;background:transparent;color:var(--red);
  font-size:.85rem;font-weight:600;cursor:pointer;
}
.btn-del:hover{text-decoration:underline}

/* ==================== 题库练习 ==================== */
.practice-area{
  background:#f9f9fb;border-radius:16px;padding:24px;
  margin-bottom:16px;
}
.practice-area .q-text{font-size:.95rem;font-weight:600;margin-bottom:12px}
.practice-area .options label{
  display:block;padding:10px 14px;margin-bottom:8px;
  border:1px solid #e5e5ea;border-radius:12px;cursor:pointer;
  transition:all .2s;font-size:.9rem;
}
.practice-area .options label:hover{border-color:var(--blue);background:#f0f5ff}
.practice-area .options input[type=radio]{margin-right:8px}
.practice-result{
  margin-top:12px;padding:12px 16px;border-radius:12px;font-size:.9rem;font-weight:600;
}
.practice-result.correct{background:#e8f5e9;color:var(--green)}
.practice-result.wrong{background:#ffe5e5;color:var(--red)}

/* ==================== 通用按钮 / 小组件 ==================== */
.btn-outline{
  padding:8px 20px;border:1.5px solid var(--blue);border-radius:12px;
  background:transparent;color:var(--blue);font-size:.88rem;font-weight:600;
  cursor:pointer;transition:all .2s;
}
.btn-outline:hover{background:var(--blue);color:#fff}
.btn-sm{padding:6px 14px;font-size:.82rem;border-radius:10px}
.btn-danger{border-color:var(--red);color:var(--red)}
.btn-danger:hover{background:var(--red);color:#fff}

.tabs{display:flex;gap:4px;margin-bottom:20px;border-bottom:2px solid #f0f0f0;padding-bottom:0}
.tab-btn{
  padding:10px 20px;border:none;background:transparent;
  font-size:.9rem;color:var(--sub);cursor:pointer;font-weight:500;
  border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .2s;
}
.tab-btn:hover{color:var(--text)}
.tab-btn.active{color:var(--blue);border-bottom-color:var(--blue);font-weight:600}

.msg{
  padding:14px 20px;border-radius:12px;font-size:.9rem;
  margin-bottom:14px;font-weight:500;
}
.msg.ok{background:#e8f5e9;color:var(--green)}
.msg.err{background:#ffe5e5;color:var(--red)}

.empty-state{text-align:center;padding:48px 0;color:var(--sub);font-size:.95rem}

/* ==================== 管理员功能 ==================== */
.role-toggle{
  display:flex;gap:0;margin-bottom:20px;border-radius:12px;overflow:hidden;
  border:1.5px solid #d2d2d7;
}
.role-btn{
  flex:1;padding:10px 0;border:none;background:#fafafa;
  font-size:.9rem;font-weight:600;color:var(--sub);cursor:pointer;
  transition:all .25s;
}
.role-btn:first-child{border-right:1.5px solid #d2d2d7}
.role-btn.active{background:var(--blue);color:#fff}

.admin-sidebar .brand{color:#6e5ce6!important}
.admin-sidebar .nav-item.active{background:rgba(110,92,230,.08);color:#6e5ce6}

.admin-toolbar{
  display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:16px;
}
.admin-toolbar input{
  padding:9px 14px;border:1px solid #d2d2d7;border-radius:12px;
  font-size:.9rem;outline:none;min-width:200px;transition:border .2s;
}
.admin-toolbar input:focus{border-color:var(--blue)}

.admin-table{
  width:100%;border-collapse:separate;border-spacing:0;
  font-size:.88rem;
}
.admin-table thead th{
  text-align:left;padding:10px 12px;font-size:.8rem;
  color:var(--sub);font-weight:600;border-bottom:2px solid #f0f0f0;
  white-space:nowrap;
}
.admin-table tbody td{
  padding:12px;border-bottom:1px solid #f5f5f7;
  vertical-align:middle;
}
.admin-table tbody tr:hover{background:#fafbfe}
.admin-table tbody tr:last-child td{border-bottom:none}

.total-badge{
  display:inline-block;font-size:.78rem;font-weight:500;
  color:var(--sub);margin-left:8px;
}
.cell-short{max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.cell-long{max-width:280px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

.link-text{
  color:var(--blue);text-decoration:none;font-size:.85rem;
  word-break:break-all;
}
.link-text:hover{text-decoration:underline}

.course-link{
  display:inline-block;margin-top:6px;font-size:.82rem;
  color:var(--blue);text-decoration:none;font-weight:500;
  transition:color .2s;
}
.course-link:hover{color:var(--blue-hover);text-decoration:underline}

/* ==================== 响应式 ==================== */
@media(max-width:900px){
  .dashboard-left{display:none}
  .main-panel{margin-left:0;padding:20px 16px 48px}
  .welcome-grid{grid-template-columns:1fr}
  .course-grid{grid-template-columns:1fr 1fr}
  .profile-grid{grid-template-columns:1fr}
  .admin-table{font-size:.82rem}
  .admin-toolbar input{min-width:140px}
}
@media(max-width:600px){
  .course-grid{grid-template-columns:1fr}
  .subcard-grid{grid-template-columns:1fr 1fr}
  .admin-table th:nth-child(n+4),.admin-table td:nth-child(n+4){display:none}
}
