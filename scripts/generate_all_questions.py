"""
generate_all_questions.py
为 courses 表中每门课程生成 10 道考研风格选择题，插入 course_questions 表。
"""
import pymysql
import json
import random
import hashlib

DB = {
    'host': '127.0.0.1',
    'port': 3306,
    'user': 'root',
    'password': '123456',
    'database': 'grad_project',
    'charset': 'utf8mb4',
}

# ─────────────────── 按类型分类的题目模板 ───────────────────
# 每个模板: (question_template, options_func, answer_index, explanation_template)
# question_template 中 {name} 会被替换为课程名

TEMPLATES = {
    '计算机': [
        {
            'q': '在{name}课程中，以下哪个概念是最基础的核心概念？',
            'opts': ['算法复杂度分析', '数据抽象与封装', '递归与迭代', '并发与同步'],
            'a': 1, 'e': '数据抽象与封装是计算机科学中最基本的设计原则，贯穿于软件工程的各个层面。'
        },
        {
            'q': '关于{name}的学习，以下哪种方法最有效？',
            'opts': ['只看理论不动手', '理论结合编程实践', '只刷题不看书', '背诵所有定义'],
            'a': 1, 'e': '计算机类课程强调理论与实践结合，通过编程加深对抽象概念的理解。'
        },
        {
            'q': '{name}中，时间复杂度为O(n log n)的排序算法是？',
            'opts': ['冒泡排序', '归并排序', '选择排序', '插入排序'],
            'a': 1, 'e': '归并排序的时间复杂度在最坏情况下也是O(n log n)，是最优比较排序算法之一。'
        },
        {
            'q': '在{name}的知识体系中，栈和队列属于哪类数据结构？',
            'opts': ['非线性结构', '线性结构', '图结构', '树结构'],
            'a': 1, 'e': '栈和队列都是线性表的特殊形式，属于线性数据结构。'
        },
        {
            'q': '{name}涉及的二叉树中，完全二叉树的第k层最多有多少个节点？',
            'opts': ['k个', '2^(k-1)个', '2^k个', 'k^2个'],
            'a': 1, 'e': '完全二叉树第k层最多有2^(k-1)个节点，这是二叉树的基本性质。'
        },
        {
            'q': '学习{name}时，关于图的遍历，BFS使用的数据结构是？',
            'opts': ['栈', '队列', '优先队列', '链表'],
            'a': 1, 'e': 'BFS（广度优先搜索）使用队列来存储待访问的节点，保证按层次遍历。'
        },
        {
            'q': '{name}中，哈希表的平均查找时间复杂度是？',
            'opts': ['O(n)', 'O(1)', 'O(log n)', 'O(n²)'],
            'a': 1, 'e': '在理想情况下（无冲突或冲突极少），哈希表提供O(1)的平均查找时间。'
        },
        {
            'q': '在{name}课程体系中，以下哪个不是操作系统的核心功能？',
            'opts': ['进程管理', '内存管理', '网页渲染', '文件系统'],
            'a': 2, 'e': '网页渲染是浏览器的功能，不属于操作系统的核心管理范畴。'
        },
        {
            'q': '结合{name}所学，TCP协议的三次握手第二步，服务器发送的是？',
            'opts': ['SYN', 'SYN+ACK', 'ACK', 'FIN'],
            'a': 1, 'e': 'TCP三次握手中，第二步服务器返回SYN+ACK，表示确认客户端请求并发起自己的同步。'
        },
        {
            'q': '{name}中，关系数据库中的"范式"主要用于？',
            'opts': ['提高查询速度', '减少数据冗余', '增加存储空间', '简化用户界面'],
            'a': 1, 'e': '范式化（Normalization）的主要目的是减少数据冗余和消除更新异常。'
        },
    ],
    '数学': [
        {
            'q': '在{name}中，函数f(x)=x³-3x在x=1处的极值情况是？',
            'opts': ['极大值', '极小值', '不是极值点', '无法判断'],
            'a': 1, 'e': "f'(x)=3x²-3，f'(1)=0；f''(x)=6x，f''(1)=6>0，故x=1是极小值点。"
        },
        {
            'q': '学习{name}时，级数∑(1/n²)（n=1到∞）的收敛性如何？',
            'opts': ['发散', '条件收敛', '绝对收敛', '振荡'],
            'a': 2, 'e': '∑(1/n²)是p级数（p=2>1），绝对收敛，其和为π²/6。'
        },
        {
            'q': '{name}中，3×3矩阵A满足A²=A，则A的特征值可能是？',
            'opts': ['0或1', '1或2', '-1或1', '0或-1'],
            'a': 0, 'e': 'A²=A意味着A是幂等矩阵，其特征值只能是0或1。'
        },
        {
            'q': '在{name}的知识框架下，向量组线性相关的充要条件是？',
            'opts': ['秩等于向量个数', '秩小于向量个数', '行列式不为零', '秩大于向量个数'],
            'a': 1, 'e': '向量组线性相关的充要条件是其秩小于向量个数，即存在非零线性组合使得结果为零向量。'
        },
        {
            'q': '{name}涉及的概率论中，正态分布N(μ,σ²)的期望和方差分别是？',
            'opts': ['μ和σ', 'μ和σ²', 'σ和μ²', 'σ²和μ'],
            'a': 1, 'e': '正态分布N(μ,σ²)的期望为μ，方差为σ²，这是正态分布的定义参数。'
        },
        {
            'q': '在{name}中，定积分∫₀¹(3x²)dx的值为？',
            'opts': ['0', '1', '3', '1/3'],
            'a': 1, 'e': '∫₀¹(3x²)dx = [x³]₀¹ = 1³ - 0³ = 1。'
        },
        {
            'q': '{name}课程中，拉格朗日中值定理要求函数满足的条件是？',
            'opts': ['连续即可', '闭区间连续、开区间可导', '处处可导', '处处连续可微'],
            'a': 1, 'e': '拉格朗日中值定理要求函数在闭区间[a,b]上连续，在开区间(a,b)上可导。'
        },
        {
            'q': '结合{name}所学，二重积分的计算通常可以转化为？',
            'opts': ['一次积分', '两次累次积分', '级数求和', '微分方程'],
            'a': 1, 'e': '根据Fubini定理，在满足一定条件下，二重积分可以转化为两次累次积分计算。'
        },
        {
            'q': '在{name}中，泰勒展开式的主要用途是？',
            'opts': ['精确求解方程', '近似函数值', '求定积分', '证明不等式'],
            'a': 1, 'e': '泰勒展开的核心用途是用多项式近似复杂函数，在工程和科学计算中广泛应用。'
        },
        {
            'q': '{name}中，全微分存在的充分条件是？',
            'opts': ['偏导数存在', '偏导数连续', '函数连续', '偏导数有界'],
            'a': 1, 'e': '偏导数连续是全微分存在的充分条件（但非必要条件）。'
        },
    ],
    '外语': [
        {
            'q': '在{name}课程中，"consequently"一词的同义替换是？',
            'opts': ['however', 'therefore', 'meanwhile', 'otherwise'],
            'a': 1, 'e': 'consequently意为"因此、所以"，与therefore同义，表示因果关系。'
        },
        {
            'q': '学习{name}时，以下哪句使用了虚拟语气？',
            'opts': ['I am a student.', 'If I were you, I would go.', 'She has left.', 'They are coming.'],
            'a': 1, 'e': '"If I were you"使用了虚拟语气（与现在事实相反），were是虚拟语气的标志。'
        },
        {
            'q': '在{name}中，"elaborate"用作动词时的含义是？',
            'opts': ['简化', '详细阐述', '删除', '忽略'],
            'a': 1, 'e': 'elaborate作动词意为"详细阐述、精心制作"，常见于学术写作中。'
        },
        {
            'q': '{name}课程涉及的考研英语阅读中，"infer"题型要求考生？',
            'opts': ['直接定位原文', '进行推理判断', '翻译句子', '背诵段落'],
            'a': 1, 'e': 'infer题型（推断题）要求考生根据原文信息进行逻辑推理，得出隐含结论。'
        },
        {
            'q': '结合{name}所学，英语写作中"first and foremost"的作用是？',
            'opts': ['总结全文', '引出最重要的论点', '表示转折', '列举事例'],
            'a': 1, 'e': '"first and foremost"意为"首先也是最重要的"，用于引出核心论点。'
        },
        {
            'q': '{name}中，定语从句与同位语从句的区别在于？',
            'opts': ['连接词不同', 'that在从句中是否充当成分', '时态不同', '主语不同'],
            'a': 1, 'e': '定语从句中that充当成分（主语/宾语），同位语从句中that仅起连接作用不充当成分。'
        },
        {
            'q': '在{name}的写作练习中，段落的topic sentence通常位于？',
            'opts': ['段末', '段首', '段中', '没有固定位置'],
            'a': 1, 'e': '英语议论文中，主题句（topic sentence）通常位于段首，起到统领全段的作用。'
        },
        {
            'q': '学习{name}时，"phenomenon"的复数形式是？',
            'opts': ['phenomenons', 'phenomena', 'phenomenies', 'phenomenas'],
            'a': 1, 'e': 'phenomenon是希腊语借词，复数形式为phenomena，是考研英语的高频词汇。'
        },
        {
            'q': '{name}中涉及的被动语态结构为？',
            'opts': ['主语+do+宾语', '主语+be+过去分词', '主语+have+现在分词', '主语+will+动词原形'],
            'a': 1, 'e': '被动语态的基本结构为"主语+be+过去分词（+by+施动者）"。'
        },
        {
            'q': '在{name}的听力训练中，精听(intensive listening)的主要目的是？',
            'opts': ['获取大意', '训练细节捕捉能力', '培养语感', '扩大词汇量'],
            'a': 1, 'e': '精听强调对每个词、每个句子的准确理解，主要训练细节捕捉和辨音能力。'
        },
    ],
    '哲学': [
        {
            'q': '在{name}课程中，唯物辩证法的核心规律是？',
            'opts': ['质量互变规律', '对立统一规律', '否定之否定规律', '因果律'],
            'a': 1, 'e': '对立统一规律（矛盾规律）是唯物辩证法的核心和实质，揭示了事物发展的根本动力。'
        },
        {
            'q': '学习{name}时，马克思主义哲学的基本特征是？',
            'opts': ['思辨性', '实践性', '神秘性', '形而上学性'],
            'a': 1, 'e': '实践性是马克思主义哲学区别于其他哲学的最显著特征。'
        },
        {
            'q': '{name}中，认识的本质是？',
            'opts': ['主体对客体的被动反映', '主体对客体的能动反映', '先验的理性判断', '感觉经验的总和'],
            'a': 1, 'e': '辩证唯物主义认识论认为，认识是主体对客体的能动反映，具有创造性和主动性。'
        },
        {
            'q': '在{name}的知识框架下，"实践是检验真理的唯一标准"体现了？',
            'opts': ['唯心主义', '辩证唯物主义认识论', '形而上学', '不可知论'],
            'a': 1, 'e': '实践是检验真理的唯一标准，这是辩证唯物主义认识论的核心命题。'
        },
        {
            'q': '{name}涉及的辩证法中，量变到质变的过程说明了？',
            'opts': ['事物发展是偶然的', '事物变化是渐进和飞跃的统一', '事物不会改变', '量变可以无限持续'],
            'a': 1, 'e': '量变到质变规律揭示了事物发展是渐进性（量变）和飞跃性（质变）的辩证统一。'
        },
        {
            'q': '结合{name}所学，历史唯物主义认为社会发展的根本动力是？',
            'opts': ['英雄人物', '生产力与生产关系的矛盾', '科学技术', '思想文化'],
            'a': 1, 'e': '历史唯物主义认为生产力与生产关系、经济基础与上层建筑的矛盾运动是社会发展的根本动力。'
        },
        {
            'q': '在{name}中，"否定之否定"规律揭示了事物发展的？',
            'opts': ['随机性', '前进性和曲折性的统一', '循环往复', '线性进步'],
            'a': 1, 'e': '否定之否定规律表明事物发展是前进性与曲折性的统一，呈现螺旋式上升趋势。'
        },
        {
            'q': '{name}课程中，意识与物质的关系是？',
            'opts': ['意识决定物质', '物质决定意识，意识反作用于物质', '二者无关', '二者完全等同'],
            'a': 1, 'e': '辩证唯物主义认为物质决定意识，意识对物质有能动的反作用，二者对立统一。'
        },
        {
            'q': '学习{name}时，"具体问题具体分析"的哲学依据是？',
            'opts': ['联系的普遍性', '矛盾的特殊性', '发展的永恒性', '运动的绝对性'],
            'a': 1, 'e': '具体问题具体分析是矛盾特殊性原理的方法论要求，是马克思主义活的灵魂。'
        },
        {
            'q': '{name}中，实践的基本形式不包括？',
            'opts': ['生产实践', '社会政治实践', '科学文化实践', '宗教冥想'],
            'a': 3, 'e': '实践的三种基本形式是生产实践、社会政治实践和科学文化实践，宗教冥想不属于实践范畴。'
        },
    ],
    '经管': [
        {
            'q': '在{name}课程中，供给曲线向右移动意味着？',
            'opts': ['供给减少', '供给增加', '需求增加', '价格上升'],
            'a': 1, 'e': '供给曲线右移表示在同一价格水平下供给量增加，可能由技术进步或成本降低引起。'
        },
        {
            'q': '学习{name}时，GDP的计算方法不包括？',
            'opts': ['支出法', '收入法', '生产法', '利润法'],
            'a': 3, 'e': 'GDP的三种核算方法是支出法、收入法和生产法，不存在"利润法"。'
        },
        {
            'q': '{name}中，边际效用递减规律说明？',
            'opts': ['消费越多越好', '额外消费带来的满足感递减', '价格越高效用越大', '收入决定效用'],
            'a': 1, 'e': '边际效用递减规律指出，在其他条件不变时，随着消费量增加，每增加一单位消费的效用递减。'
        },
        {
            'q': '在{name}的框架下，完全竞争市场的长期均衡特征是？',
            'opts': ['超额利润为正', '经济利润为零', '存在进入壁垒', '价格由厂商决定'],
            'a': 1, 'e': '完全竞争市场长期均衡时，厂商经济利润为零，只获得正常利润。'
        },
        {
            'q': '{name}涉及的财务管理中，资产负债率的计算公式是？',
            'opts': ['总资产/总负债', '总负债/总资产', '净利润/总资产', '总负债/所有者权益'],
            'a': 1, 'e': '资产负债率=总负债/总资产×100%，反映企业的偿债能力和财务风险水平。'
        },
        {
            'q': '结合{name}所学，通货膨胀的直接表现是？',
            'opts': ['货币升值', '物价持续上涨', 'GDP下降', '失业率下降'],
            'a': 1, 'e': '通货膨胀的直接表现是物价总水平持续、普遍地上涨。'
        },
        {
            'q': '在{name}中，SWOT分析的"T"代表？',
            'opts': ['Technology', 'Threats', 'Trends', 'Targets'],
            'a': 1, 'e': 'SWOT中S=Strengths(优势), W=Weaknesses(劣势), O=Opportunities(机会), T=Threats(威胁)。'
        },
        {
            'q': '{name}课程中，需求的价格弹性大于1时，该商品为？',
            'opts': ['缺乏弹性商品', '富有弹性商品', '单位弹性商品', '完全无弹性商品'],
            'a': 1, 'e': '价格弹性>1为富有弹性商品，价格变动1%会引起需求量超过1%的变动。'
        },
        {
            'q': '学习{name}时，现金流量表的主要作用是？',
            'opts': ['反映企业盈利能力', '反映企业现金收支情况', '反映资产负债状况', '反映股东权益变动'],
            'a': 1, 'e': '现金流量表反映企业在一定期间内现金和现金等价物的流入和流出情况。'
        },
        {
            'q': '{name}中，比较优势理论由谁提出？',
            'opts': ['亚当·斯密', '大卫·李嘉图', '马歇尔', '凯恩斯'],
            'a': 1, 'e': '比较优势理论由大卫·李嘉图在其1817年的著作中系统提出。'
        },
    ],
    '物理': [
        {
            'q': '在{name}课程中，牛顿第二定律的数学表达式是？',
            'opts': ['F=mv', 'F=ma', 'F=mg', 'F=mv²'],
            'a': 1, 'e': '牛顿第二定律F=ma，表示物体加速度与所受合力成正比，与质量成反比。'
        },
        {
            'q': '学习{name}时，光的双缝干涉实验证明了光的？',
            'opts': ['粒子性', '波动性', '热效应', '电磁性'],
            'a': 1, 'e': '杨氏双缝干涉实验产生明暗相间的干涉条纹，是光的波动性的直接证据。'
        },
        {
            'q': '{name}中，热力学第二定律的开尔文表述是？',
            'opts': ['能量守恒', '不可能从单一热源吸热全部转化为功', '熵恒增', '温度不变'],
            'a': 1, 'e': '开尔文表述：不可能制造这样的循环发动机，它从单一热源吸热并将之全部转化为功。'
        },
        {
            'q': '在{name}的量子力学部分，海森堡不确定性原理表明？',
            'opts': ['能量不守恒', '位置和动量不能同时精确测定', '光速可变', '质量可以为零'],
            'a': 1, 'e': '不确定性原理ΔxΔp≥ℏ/2，位置越精确，动量越不确定，反之亦然。'
        },
        {
            'q': '{name}涉及的电磁学中，法拉第电磁感应定律说明？',
            'opts': ['静电场产生磁场', '变化的磁通量产生感应电动势', '电流产生热量', '磁场力做功'],
            'a': 1, 'e': '法拉第电磁感应定律：感应电动势的大小与磁通量的变化率成正比。'
        },
        {
            'q': '结合{name}所学，狭义相对论的基本假设不包括？',
            'opts': ['光速不变原理', '相对性原理', '等效原理', '时空均匀性'],
            'a': 2, 'e': '等效原理是广义相对论的基石，不属于狭义相对论的基本假设。'
        },
        {
            'q': '在{name}中，简谐振动的回复力与位移的关系是？',
            'opts': ['正比同向', '反比同向', '正比反向', '无关'],
            'a': 2, 'e': '简谐振动中回复力F=-kx，与位移成正比且方向相反（指向平衡位置）。'
        },
        {
            'q': '{name}课程中，理想气体状态方程为？',
            'opts': ['PV=nRT', 'PV=nkT', 'P=ρgh', 'E=mc²'],
            'a': 0, 'e': '理想气体状态方程PV=nRT，其中n为物质的量，R为普适气体常数。'
        },
        {
            'q': '学习{name}时，多普勒效应描述的是？',
            'opts': ['光的折射', '波源与观察者相对运动时频率的变化', '声音的反射', '光的衍射'],
            'a': 1, 'e': '多普勒效应是指波源与观察者之间存在相对运动时，观察者接收到的频率发生变化的现象。'
        },
        {
            'q': '{name}中，角动量守恒的条件是？',
            'opts': ['合力为零', '合力矩为零', '速度不变', '质量不变'],
            'a': 1, 'e': '当作用在物体上的合外力矩为零时，物体的角动量守恒。'
        },
    ],
    '化学': [
        {
            'q': '在{name}课程中，元素周期表中同一周期从左到右原子半径的变化规律是？',
            'opts': ['逐渐增大', '逐渐减小', '不变', '先增后减'],
            'a': 1, 'e': '同周期从左到右，核电荷数增加使电子被拉得更紧，原子半径逐渐减小。'
        },
        {
            'q': '学习{name}时，化学反应达到平衡状态的特征是？',
            'opts': ['反应停止', '正逆反应速率相等', '浓度不再变化', '正逆反应速率相等且各组分浓度不变'],
            'a': 3, 'e': '化学平衡的特征是正逆反应速率相等，且各组分的浓度不再随时间变化。'
        },
        {
            'q': '{name}中，pH=7的溶液一定是中性的吗？',
            'opts': ['一定是', '不一定，取决于温度', '永远不是', '取决于溶剂'],
            'a': 1, 'e': '水的离子积常数Kw随温度变化，25°C时pH=7为中性，但其他温度下中性pH≠7。'
        },
        {
            'q': '在{name}的有机化学部分，苯环的特征反应类型是？',
            'opts': ['加成反应', '取代反应', '消去反应', '聚合反应'],
            'a': 1, 'e': '苯环由于其特殊的共轭结构，主要发生取代反应（如硝化、卤代），而非加成反应。'
        },
        {
            'q': '{name}涉及的电化学中，原电池的负极发生的反应是？',
            'opts': ['还原反应', '氧化反应', '中和反应', '分解反应'],
            'a': 1, 'e': '原电池中，负极是较活泼的金属，发生氧化反应（失去电子）。'
        },
        {
            'q': '结合{name}所学，勒夏特列原理说明了？',
            'opts': ['化学反应不可逆', '平衡移动总是减弱外界条件的改变', '温度不影响平衡', '催化剂改变平衡位置'],
            'a': 1, 'e': '勒夏特列原理：如果改变化学平衡的条件，平衡将向减弱这种改变的方向移动。'
        },
        {
            'q': '在{name}中，共价键的形成条件是？',
            'opts': ['电子转移', '共用电子对', '金属键', '分子间力'],
            'a': 1, 'e': '共价键是通过原子间共用电子对形成的化学键。'
        },
        {
            'q': '{name}课程中，催化剂的作用是？',
            'opts': ['改变反应平衡常数', '降低反应活化能', '改变反应热', '增加产物浓度'],
            'a': 1, 'e': '催化剂通过降低反应的活化能来加速反应速率，但不改变平衡常数和反应热。'
        },
        {
            'q': '学习{name}时，理想气体在等温过程中内能的变化为？',
            'opts': ['增大', '零', '减小', '不确定'],
            'a': 1, 'e': '理想气体内能只是温度的函数，等温过程中温度不变，故内能变化为零。'
        },
        {
            'q': '{name}中，摩尔质量的单位是？',
            'opts': ['kg', 'g/mol', 'mol', 'g/L'],
            'a': 1, 'e': '摩尔质量是指1摩尔物质的质量，单位为g/mol。'
        },
    ],
    '生命科学': [
        {
            'q': '在{name}课程中，DNA双螺旋结构的碱基配对原则是？',
            'opts': ['A-G, T-C', 'A-T, G-C', 'A-C, T-G', 'A-U, G-C'],
            'a': 1, 'e': 'DNA中腺嘌呤(A)与胸腺嘧啶(T)配对，鸟嘌呤(G)与胞嘧啶(C)配对。'
        },
        {
            'q': '学习{name}时，有丝分裂过程中，染色体数目加倍发生在？',
            'opts': ['G1期', 'S期', '前期', '后期'],
            'a': 3, 'e': '有丝分裂后期，着丝点分裂，姐妹染色单体分离，染色体数目暂时加倍。'
        },
        {
            'q': '{name}中，酶的本质是？',
            'opts': ['无机催化剂', '大多数是蛋白质', '核酸', '糖类'],
            'a': 1, 'e': '酶大多数是蛋白质（少数是RNA，即核酶），具有高度专一性和高效催化性。'
        },
        {
            'q': '在{name}的生态学部分，食物链中能量传递效率约为？',
            'opts': ['1%-5%', '10%-20%', '50%-60%', '90%以上'],
            'a': 1, 'e': 'Lindeman的十分之一定律指出，营养级间能量传递效率约为10%-20%。'
        },
        {
            'q': '{name}涉及的遗传学中，孟德尔的分离定律适用于？',
            'opts': ['多对等位基因', '一对等位基因', '连锁基因', '细胞质遗传'],
            'a': 1, 'e': '分离定律描述的是一对等位基因在杂合子形成配子时彼此分离的规律。'
        },
        {
            'q': '结合{name}所学，光合作用的暗反应发生在？',
            'opts': ['类囊体膜上', '叶绿体基质中', '细胞质中', '线粒体中'],
            'a': 1, 'e': '暗反应（Calvin循环）发生在叶绿体基质中，利用光反应产生的ATP和NADPH固定CO₂。'
        },
        {
            'q': '在{name}中，转录过程中的模板是？',
            'opts': ['mRNA', 'DNA的一条链', 'tRNA', '核糖体'],
            'a': 1, 'e': '转录以DNA的一条链（模板链）为模板，在RNA聚合酶作用下合成RNA。'
        },
        {
            'q': '{name}课程中，细胞膜的流动镶嵌模型说明了？',
            'opts': ['膜是刚性结构', '磷脂双分子层和蛋白质都具有流动性', '膜不含蛋白质', '膜是完全对称的'],
            'a': 1, 'e': '流动镶嵌模型指出，细胞膜以磷脂双分子层为骨架，蛋白质镶嵌其中，二者都具有流动性。'
        },
        {
            'q': '学习{name}时，中心法则描述的信息流方向是？',
            'opts': ['蛋白质→RNA→DNA', 'DNA→RNA→蛋白质', 'RNA→DNA→蛋白质', 'DNA→蛋白质→RNA'],
            'a': 1, 'e': '中心法则：遗传信息从DNA→(转录)→RNA→(翻译)→蛋白质。'
        },
        {
            'q': '{name}中，基因突变的特点不包括？',
            'opts': ['随机性', '不定向性', '低频性', '必然有害性'],
            'a': 3, 'e': '基因突变并非必然有害，可以是有利的、有害的或中性的。'
        },
    ],
    '工程': [
        {
            'q': '在{name}课程中，工程项目管理的核心约束是？',
            'opts': ['范围、时间、成本', '人员、设备、材料', '质量、安全、环保', '设计、施工、运维'],
            'a': 0, 'e': '项目管理的"铁三角"是范围、时间和成本，三者相互制约。'
        },
        {
            'q': '学习{name}时，控制系统中负反馈的作用是？',
            'opts': ['使系统不稳定', '减小系统误差', '增大输出', '消除噪声'],
            'a': 1, 'e': '负反馈能自动减小系统的偏差，提高系统的稳定性和精度。'
        },
        {
            'q': '{name}中，材料力学的胡克定律适用于？',
            'opts': ['塑性变形阶段', '弹性变形阶段', '断裂阶段', '所有阶段'],
            'a': 1, 'e': '胡克定律σ=Eε仅适用于弹性变形阶段，超过弹性极限后不再成立。'
        },
        {
            'q': '在{name}的热力学部分，卡诺循环的效率取决于？',
            'opts': ['工作物质的种类', '高低温热源的温度', '循环的速度', '气缸的材料'],
            'a': 1, 'e': '卡诺循环效率η=1-T₂/T₁，只取决于高温热源T₁和低温热源T₂的温度。'
        },
        {
            'q': '{name}涉及的信号处理中，采样定理要求采样频率至少为？',
            'opts': ['信号频率', '信号最高频率的2倍', '信号最低频率的2倍', '信号带宽'],
            'a': 1, 'e': '奈奎斯特采样定理：采样频率fs≥2fmax，才能无失真地恢复原信号。'
        },
        {
            'q': '结合{name}所学，有限元分析(FEA)的基本思想是？',
            'opts': ['将整体近似为一个点', '将连续体离散为有限个单元', '用解析法精确求解', '忽略边界条件'],
            'a': 1, 'e': '有限元法将连续体离散为有限个互联单元，在每个单元上建立近似解，最终组装求解。'
        },
        {
            'q': '在{name}中，PID控制器的三个参数分别代表？',
            'opts': ['位置、速度、加速度', '比例、积分、微分', '功率、电流、电压', '频率、幅值、相位'],
            'a': 1, 'e': 'PID = Proportional(比例) + Integral(积分) + Derivative(微分)控制。'
        },
        {
            'q': '{name}课程中，工程伦理的核心原则是？',
            'opts': ['利润最大化', '公众安全与福祉优先', '技术创新第一', '服从上级指令'],
            'a': 1, 'e': '工程伦理的首要原则是将公众的安全、健康和福祉放在首位。'
        },
        {
            'q': '学习{name}时，流体力学中雷诺数用于判断？',
            'opts': ['流体压力', '流体温度', '流动是层流还是湍流', '流体密度'],
            'a': 2, 'e': '雷诺数Re是惯性力与粘性力之比，Re<2300通常为层流，Re>4000为湍流。'
        },
        {
            'q': '{name}中，拉普拉斯变换的主要用途是？',
            'opts': ['求解代数方程', '将时域微分方程转化为s域代数方程', '进行数值积分', '绘制波特图'],
            'a': 1, 'e': '拉普拉斯变换将时域中的微分方程转化为s域中的代数方程，简化线性系统分析。'
        },
    ],
    '教育': [
        {
            'q': '在{name}课程中，建构主义学习理论的核心观点是？',
            'opts': ['知识是被动接受的', '学习者主动建构知识', '教师是知识的唯一来源', '记忆等于学习'],
            'a': 1, 'e': '建构主义认为知识不是被动接受的，而是学习者在已有经验基础上主动建构的。'
        },
        {
            'q': '学习{name}时，布鲁姆教育目标分类中最高层次是？',
            'opts': ['记忆', '理解', '应用', '创造'],
            'a': 3, 'e': '布鲁姆修订版分类从低到高为：记忆、理解、应用、分析、评价、创造。'
        },
        {
            'q': '{name}中，维果茨基的"最近发展区"概念指的是？',
            'opts': ['学生已掌握的知识', '现有水平与潜在发展水平之间的差距', '教师的教学范围', '课程的难度范围'],
            'a': 1, 'e': '最近发展区是指学生独立解决问题的实际水平与在指导下能达到的潜在水平之间的区域。'
        },
        {
            'q': '在{name}的教学设计中，ADDIE模型的A代表？',
            'opts': ['Application', 'Analysis', 'Assessment', 'Adaptation'],
            'a': 1, 'e': 'ADDIE = Analysis(分析), Design(设计), Development(开发), Implementation(实施), Evaluation(评估)。'
        },
        {
            'q': '{name}涉及的评估方式中，形成性评价的目的是？',
            'opts': ['给出最终成绩', '在学习过程中提供反馈以改进教学', '筛选优秀学生', '比较学校排名'],
            'a': 1, 'e': '形成性评价在教学过程中进行，目的是诊断学习问题并及时调整教学策略。'
        },
        {
            'q': '结合{name}所学，翻转课堂的核心特征是？',
            'opts': ['取消课堂教学', '课前学习知识，课中深度互动', '全部线上学习', '增加课后作业'],
            'a': 1, 'e': '翻转课堂将知识传递移至课前（视频/阅读），课堂时间用于互动讨论和深度学习。'
        },
        {
            'q': '在{name}中，多元智能理论由谁提出？',
            'opts': ['皮亚杰', '加德纳', '斯金纳', '杜威'],
            'a': 1, 'e': '多元智能理论由哈佛大学的加德纳(Howard Gardner)于1983年提出。'
        },
        {
            'q': '{name}课程中，脚手架教学法的含义是？',
            'opts': ['让学生自学', '教师提供临时支持并逐步撤除', '固定不变的教学模式', '只用讲授法'],
            'a': 1, 'e': '脚手架教学借鉴维果茨基的理论，教师提供适当支持帮助学生完成任务，随能力增长逐步撤除。'
        },
        {
            'q': '学习{name}时，课程标准与教学大纲的区别在于？',
            'opts': ['没有区别', '课程标准更关注学生的学习结果', '教学大纲更具灵活性', '课程标准只关注内容'],
            'a': 1, 'e': '课程标准以学生的学习结果（能力/素养）为导向，而教学大纲以教学内容和进度为导向。'
        },
        {
            'q': '{name}中，合作学习的关键要素不包括？',
            'opts': ['积极互赖', '个体责任', '面对面互动', '组间竞争淘汰'],
            'a': 3, 'e': '合作学习的五要素是积极互赖、个体责任、面对面互动、社交技能和小组自评，不包括淘汰机制。'
        },
    ],
    '医学': [
        {
            'q': '在{name}课程中，人体最大的器官是？',
            'opts': ['肝脏', '皮肤', '大脑', '肺'],
            'a': 1, 'e': '皮肤是人体最大的器官，面积约1.5-2平方米，重量约占体重的16%。'
        },
        {
            'q': '学习{name}时，抗生素的作用机制不包括？',
            'opts': ['抑制细胞壁合成', '影响蛋白质合成', '直接杀灭病毒', '抑制核酸合成'],
            'a': 2, 'e': '抗生素主要针对细菌，对病毒无效。抗病毒需要专门的抗病毒药物。'
        },
        {
            'q': '{name}中，血液循环系统的功能是？',
            'opts': ['消化食物', '运输氧气和营养物质', '产生抗体', '分泌激素'],
            'a': 1, 'e': '循环系统的核心功能是运输氧气、营养物质、代谢废物和激素等到全身各组织器官。'
        },
        {
            'q': '在{name}中，人体免疫系统的三道防线依次是？',
            'opts': ['抗体、补体、干扰素', '皮肤黏膜、吞噬细胞、特异性免疫', 'T细胞、B细胞、NK细胞', '骨髓、胸腺、脾脏'],
            'a': 1, 'e': '第一道防线是皮肤和黏膜，第二道是吞噬细胞等非特异性免疫，第三道是特异性免疫（T/B细胞）。'
        },
        {
            'q': '{name}涉及的神经系统中，神经元传导信号的方式是？',
            'opts': ['化学信号', '电信号和化学信号', '机械信号', '热信号'],
            'a': 1, 'e': '神经元在自身内通过电信号（动作电位）传导，在突触间通过化学信号（神经递质）传递。'
        },
        {
            'q': '结合{name}所学，糖尿病的根本原因是？',
            'opts': ['摄入过多糖分', '胰岛素分泌不足或作用障碍', '运动过少', '遗传因素'],
            'a': 1, 'e': '糖尿病的本质是胰岛素的绝对或相对不足，或组织对胰岛素不敏感。'
        },
        {
            'q': '在{name}中，循证医学(EBM)的核心思想是？',
            'opts': ['凭借经验治疗', '基于最佳研究证据进行临床决策', '按照教科书治疗', '患者自己决定'],
            'a': 1, 'e': '循证医学强调将最佳研究证据与临床经验及患者意愿相结合以做出医疗决策。'
        },
        {
            'q': '{name}课程中，心电图中QRS波群代表？',
            'opts': ['心房去极化', '心室去极化', '心房复极化', '心室复极化'],
            'a': 1, 'e': 'QRS波群代表心室去极化过程。P波代表心房去极化，T波代表心室复极化。'
        },
        {
            'q': '学习{name}时，药物的半衰期指的是？',
            'opts': ['药物起效的时间', '血药浓度下降一半所需的时间', '药物完全代谢的时间', '给药间隔时间'],
            'a': 1, 'e': '药物半衰期(t½)是指血浆药物浓度下降至峰值一半所需的时间。'
        },
        {
            'q': '{name}中，DNA复制的方式是？',
            'opts': ['全保留复制', '半保留复制', '弥散复制', '随机复制'],
            'a': 1, 'e': 'DNA半保留复制：每个子代DNA分子含一条亲代链和一条新合成链。'
        },
    ],
    '文学': [
        {
            'q': '在{name}课程中，文学批评的基本方法不包括？',
            'opts': ['社会历史批评', '新批评（文本细读）', '化学分析法', '接受美学'],
            'a': 2, 'e': '化学分析法属于自然科学范畴，不属于文学批评的方法。'
        },
        {
            'q': '学习{name}时，现实主义文学的核心特征是？',
            'opts': ['强调想象和幻想', '真实再现社会生活', '追求形式美', '表现潜意识'],
            'a': 1, 'e': '现实主义文学以真实客观地再现社会现实为基本特征，关注社会问题和人物性格。'
        },
        {
            'q': '{name}中，"意识流"写作手法最早由谁系统运用？',
            'opts': ['海明威', '乔伊斯', '托尔斯泰', '鲁迅'],
            'a': 1, 'e': '詹姆斯·乔伊斯的《尤利西斯》是意识流小说的代表作，系统运用了意识流手法。'
        },
        {
            'q': '在{name}的诗歌鉴赏中，"比兴"手法源自？',
            'opts': ['唐诗', '《诗经》', '宋词', '元曲'],
            'a': 1, 'e': '比兴手法源自《诗经》的"赋比兴"，是中国古代诗歌最基本的表现手法。'
        },
        {
            'q': '{name}涉及的叙事学中，全知视角的特点是？',
            'opts': ['读者知道的比角色多', '叙述者无所不知', '第一人称叙述', '视角有限制'],
            'a': 1, 'e': '全知视角的叙述者可以洞察所有角色的内心，了解所有时空的事件。'
        },
        {
            'q': '结合{name}所学，后现代文学的典型特征是？',
            'opts': ['宏大叙事', '解构与碎片化', '严格的形式', '歌颂英雄'],
            'a': 1, 'e': '后现代文学特征包括解构宏大叙事、碎片化、互文性、戏仿等。'
        },
        {
            'q': '在{name}中，"修辞"不仅是语言技巧，更是？',
            'opts': ['纯粹的语法规则', '一种思维方式和认知手段', '书法艺术', '与语义无关的装饰'],
            'a': 1, 'e': '修辞不仅是表面的语言修饰，更是一种影响思维和认知的深层手段。'
        },
        {
            'q': '{name}课程中，鲁迅《呐喊》的创作主旨是？',
            'opts': ['歌颂自然', '揭露封建礼教对人的压迫', '倡导浪漫主义', '追求形式实验'],
            'a': 1, 'e': '《呐喊》以"揭出病苦，引起疗救的注意"为主旨，深刻批判封建制度和国民性。'
        },
        {
            'q': '学习{name}时，文学作品中"象征"与"比喻"的区别是？',
            'opts': ['没有区别', '象征贯穿全篇且含义更深远', '比喻范围更广', '象征只用于诗歌'],
            'a': 1, 'e': '象征具有全局性和多义性，往往贯穿整部作品；比喻通常是局部的修辞手法。'
        },
        {
            'q': '{name}中，古典文学研究的"知人论世"方法要求？',
            'opts': ['忽略作者背景', '结合作者生平和时代背景理解作品', '只看文本本身', '按字面意思理解'],
            'a': 1, 'e': '"知人论世"是孟子提出的批评方法，强调了解作者生平和时代背景来理解作品。'
        },
    ],
    '历史': [
        {
            'q': '在{name}课程中，史料分析最重要的能力是？',
            'opts': ['记忆年代', '辨析史料的可信度与立场', '背诵事件', '编写故事'],
            'a': 1, 'e': '史料分析的核心是辨析史料来源、作者立场、时代背景，判断其可信度和价值。'
        },
        {
            'q': '学习{name}时，"年鉴学派"的贡献在于？',
            'opts': ['只关注政治史', '提倡长时段、整体性的社会史研究', '废除历史学', '只用文字史料'],
            'a': 1, 'e': '法国年鉴学派突破了传统政治事件史的局限，开创了长时段、多层次的社会经济史研究范式。'
        },
        {
            'q': '{name}中，近代中国"半殖民地半封建社会"的含义是？',
            'opts': ['完全被殖民', '丧失部分主权且封建因素与资本主义因素并存', '完全封建', '已进入资本主义'],
            'a': 1, 'e': '半殖民地指丧失了部分而非全部主权，半封建指既有封建因素又有资本主义因素。'
        },
        {
            'q': '在{name}的世界史部分，文艺复兴运动的核心思想是？',
            'opts': ['神权至上', '人文主义', '唯物主义', '民族主义'],
            'a': 1, 'e': '文艺复兴以人文主义为核心，强调人的价值和尊严，开启了近代西方文明。'
        },
        {
            'q': '{name}涉及的史学方法中，"二重证据法"是指？',
            'opts': ['只用考古证据', '结合文献记载和考古发现相互印证', '只用文献资料', '口述与文献结合'],
            'a': 1, 'e': '二重证据法由王国维提出，主张以地下考古材料与纸上文献相互参证。'
        },
        {
            'q': '结合{name}所学，"工业革命"首先发生在哪个国家？',
            'opts': ['法国', '英国', '德国', '美国'],
            'a': 1, 'e': '工业革命18世纪60年代首先在英国爆发，以蒸汽机的改良为标志。'
        },
        {
            'q': '在{name}中，唯物史观认为历史发展的根本动力是？',
            'opts': ['英雄人物', '生产力与生产关系的矛盾运动', '思想文化', '战争冲突'],
            'a': 1, 'e': '唯物史观认为生产力与生产关系的矛盾运动是推动社会历史发展的根本动力。'
        },
        {
            'q': '{name}课程中，口述史学的价值在于？',
            'opts': ['取代文字资料', '补充普通人的历史经验和记忆', '只适用于现代史', '完全客观可靠'],
            'a': 1, 'e': '口述史学的重要价值在于记录普通人的历史经验，补充精英叙事的不足。'
        },
        {
            'q': '学习{name}时，"历史虚无主义"的本质危害是？',
            'opts': ['客观评价历史', '否定历史发展规律和正面成就', '提出新观点', '鼓励创新思维'],
            'a': 1, 'e': '历史虚无主义本质上否定历史发展客观规律，歪曲和否定正面成就。'
        },
        {
            'q': '{name}中，"全球史观"强调的是？',
            'opts': ['以欧洲为中心', '从全球视野审视人类历史的整体性和互动性', '只关注经济', '否定国别史'],
            'a': 1, 'e': '全球史观（全球视野）超越民族国家的界限，关注不同文明之间的交流与互动。'
        },
    ],
    '艺术': [
        {
            'q': '在{name}课程中，色彩三要素是？',
            'opts': ['红绿蓝', '色相、明度、饱和度', '冷暖、深浅、纯度', '点线面'],
            'a': 1, 'e': '色彩三要素是色相（Hue）、明度（Value/Brightness）、饱和度（Saturation/Chroma）。'
        },
        {
            'q': '学习{name}时，"黄金分割比例"的近似值是？',
            'opts': ['1:1', '1:1.618', '1:2', '1:3'],
            'a': 1, 'e': '黄金分割比约为1:1.618（或0.618），被广泛认为是最具审美和谐性的比例。'
        },
        {
            'q': '{name}中，包豪斯学派对现代设计的主要贡献是？',
            'opts': ['倡导装饰主义', '提出"形式追随功能"的现代设计理念', '回归古典主义', '强调手工艺'],
            'a': 1, 'e': '包豪斯确立了现代设计教育体系，强调形式与功能的统一，影响深远。'
        },
        {
            'q': '在{name}的建筑美学部分，哥特式建筑的典型特征是？',
            'opts': ['圆形穹顶', '尖拱、飞扶壁和彩色玻璃窗', '木构架', '平顶'],
            'a': 1, 'e': '哥特式建筑以尖拱(pointed arch)、飞扶壁(flying buttress)和彩色玻璃窗为典型特征。'
        },
        {
            'q': '{name}涉及的美学理论中，"审美距离"理论由谁提出？',
            'opts': ['康德', '布洛', '黑格尔', '柏拉图'],
            'a': 1, 'e': '审美距离(Psychical Distance)理论由瑞士心理学家布洛(Edward Bullough)提出。'
        },
        {
            'q': '结合{name}所学，中国画的"六法"中排在首位的是？',
            'opts': ['骨法用笔', '气韵生动', '随类赋彩', '应物象形'],
            'a': 1, 'e': '谢赫"六法"中"气韵生动"居首，是中国画评判的最高标准。'
        },
        {
            'q': '在{name}中，"留白"在中国传统艺术中的作用是？',
            'opts': ['节省颜料', '营造意境和想象空间', '表示未完成', '降低难度'],
            'a': 1, 'e': '留白是中国画的重要技法，以虚补实，给观者留下想象空间，营造意境之美。'
        },
        {
            'q': '{name}课程中，印象派绘画的核心追求是？',
            'opts': ['精确素描', '捕捉光线和色彩的瞬间变化', '宗教题材', '抽象表达'],
            'a': 1, 'e': '印象派画家致力于捕捉自然光线和色彩在不同时刻的瞬间变化效果。'
        },
        {
            'q': '学习{name}时，版式设计中"对齐"原则的作用是？',
            'opts': ['增加装饰', '建立视觉秩序和关联性', '减少内容', '增大字号'],
            'a': 1, 'e': '对齐是版式设计的四大基本原则之一，能建立清晰的视觉秩序和元素间的关联。'
        },
        {
            'q': '{name}中，交互设计的"可用性"评估主要关注？',
            'opts': ['视觉美观', '用户能否有效、高效、满意地完成任务', '技术复杂度', '成本效益'],
            'a': 1, 'e': '可用性(Usability)关注有效性(effectiveness)、效率(efficiency)和用户满意度(satisfaction)。'
        },
    ],
    '社科': [
        {
            'q': '在{name}课程中，社会科学研究方法中定量与定性研究的区别在于？',
            'opts': ['定量更好', '定量侧重数据统计，定性侧重深入理解', '定性更好', '二者完全相同'],
            'a': 1, 'e': '定量研究用数据和统计方法检验假设，定性研究用访谈等深入理解社会现象。'
        },
        {
            'q': '学习{name}时，马克思主义法学认为法律的本质是？',
            'opts': ['自然正义', '统治阶级意志的体现', '全民公意', '神的旨意'],
            'a': 1, 'e': '马克思主义法学认为法是由国家制定的、体现统治阶级意志的、依靠国家强制力保障的行为规范。'
        },
        {
            'q': '{name}中，公共管理的核心价值是？',
            'opts': ['效率至上', '公共利益', '私人利润', '技术创新'],
            'a': 1, 'e': '公共管理以维护和实现公共利益为核心价值，这与私营部门管理有本质区别。'
        },
        {
            'q': '在{name}的社会学部分，"社会化"的含义是？',
            'opts': ['国有化', '个体学习社会文化规范并成为社会成员的过程', '城市化', '网络化'],
            'a': 1, 'e': '社会化是指个体通过学习社会文化知识、规范和技能，逐步成为合格社会成员的过程。'
        },
        {
            'q': '{name}涉及的法学理论中，法的渊源是指？',
            'opts': ['法的起源', '法的表现形式', '法的适用', '法的废止'],
            'a': 1, 'e': '法的渊源（法源）主要指法的表现形式，如宪法、法律、行政法规等。'
        },
        {
            'q': '结合{name}所学，中国特色社会主义法治的核心是？',
            'opts': ['以权治国', '依法治国', '以德治国', '无为而治'],
            'a': 1, 'e': '中国特色社会主义法治的核心是依法治国，建设社会主义法治国家。'
        },
        {
            'q': '在{name}中，行政法的基本原则"依法行政"要求？',
            'opts': ['行政机关可以自行立法', '行政行为必须有法律依据', '公民服从任何行政命令', '行政效率优先于法律'],
            'a': 1, 'e': '依法行政要求行政机关的行政行为必须有法律法规的依据，做到职权法定、程序合法。'
        },
        {
            'q': '{name}课程中，社会调查的抽样方法不包括？',
            'opts': ['简单随机抽样', '分层抽样', '整群抽样', '凭感觉抽样'],
            'a': 3, 'e': '科学的抽样方法包括简单随机、分层、整群、系统等抽样，不包括非科学的"凭感觉"。'
        },
        {
            'q': '学习{name}时，社会分层理论的核心概念是？',
            'opts': ['平均主义', '社会不平等的结构化', '社会同质性', '去阶层化'],
            'a': 1, 'e': '社会分层理论研究社会不平等如何被制度化和结构化，形成不同的社会群体层次。'
        },
        {
            'q': '{name}中，法治与法制的根本区别在于？',
            'opts': ['只是翻译不同', '法治强调法律至上，法制仅指法律制度', '法制更先进', '二者完全相同'],
            'a': 1, 'e': '法治(rule of law)强调法律的至上性和对权力的约束，法制(legal system)仅指法律制度的建设。'
        },
    ],
    '通用': [
        {
            'q': '在{name}课程中，学习该领域最有效的方法是？',
            'opts': ['死记硬背', '理解原理后结合实践', '考前突击', '只看课件'],
            'a': 1, 'e': '理解原理后结合实践是最有效的学习方法，能够实现知识的深层理解和迁移运用。'
        },
        {
            'q': '学习{name}时，以下哪种思维方式最有利于解决复杂问题？',
            'opts': ['线性思维', '批判性思维', '惯性思维', '单一思维'],
            'a': 1, 'e': '批判性思维要求多角度分析问题、评估证据，是解决复杂问题的关键能力。'
        },
        {
            'q': '{name}的考研复习中，高效的时间管理策略是？',
            'opts': ['通宵学习', '制定计划，分时段复习不同科目', '只复习擅长的科目', '临考前一周开始'],
            'a': 1, 'e': '合理的时间管理策略是制定详细计划，分配时段复习不同科目，保证全面且有节奏。'
        },
        {
            'q': '在{name}的学习过程中，"元认知"能力指的是？',
            'opts': ['记忆力', '对自己认知过程的认知和调控', '阅读速度', '注意力'],
            'a': 1, 'e': '元认知是"认知的认知"，指个体对自己学习过程的觉察、监控和调节能力。'
        },
        {
            'q': '{name}涉及的研究方法中，文献综述的目的是？',
            'opts': ['抄袭他人成果', '梳理已有研究，找出研究空白', '增加论文字数', '展示自己的阅读量'],
            'a': 1, 'e': '文献综述旨在系统梳理已有研究成果，明确研究现状、争议和空白，为自身研究定位。'
        },
        {
            'q': '结合{name}所学，学术论文的基本结构通常包括？',
            'opts': ['标题和正文', '引言、方法、结果、讨论(IMRAD)', '只有摘要', '随意组织'],
            'a': 1, 'e': 'IMRAD结构（引言-方法-结果-讨论）是学术论文的标准结构，便于读者理解和评审。'
        },
        {
            'q': '在{name}中，跨学科思维的价值在于？',
            'opts': ['使问题更复杂', '打破学科壁垒，提供多角度解决方案', '降低效率', '取消专业分工'],
            'a': 1, 'e': '跨学科思维能整合不同学科的理论和方法，为复杂问题提供更全面的解决方案。'
        },
        {
            'q': '{name}课程中，"知识迁移"能力体现为？',
            'opts': ['只能在考试中使用', '将所学知识应用于新的情境', '背诵书本内容', '记住课堂笔记'],
            'a': 1, 'e': '知识迁移是将在一个情境中学到的知识和技能应用于新情境的能力，是学习的最终目标。'
        },
        {
            'q': '学习{name}时，思维导图的核心作用是？',
            'opts': ['美化笔记', '可视化知识结构和内在联系', '减少学习时间', '替代教材'],
            'a': 1, 'e': '思维导图通过可视化的方式呈现知识点之间的层次关系和内在联系，有助于理解和记忆。'
        },
        {
            'q': '{name}中，终身学习理念的核心是？',
            'opts': ['学历越高越好', '学习是贯穿一生的持续过程', '只在学校学习', '考过就可以忘记'],
            'a': 1, 'e': '终身学习强调学习不局限于学校教育阶段，而是贯穿个体一生的持续过程。'
        },
    ],
}

# type 关键词 → 题目模板类别的映射
TYPE_MAPPING = {
    '计算机': '计算机',
    '数学': '数学',
    '外语': '外语',
    '英语': '外语',
    '哲学': '哲学',
    '政治': '哲学',
    '经管': '经管',
    '会计': '经管',
    '创业': '经管',
    '物理': '物理',
    '电子': '物理',
    '化学': '化学',
    '环境': '化学',
    '地球': '化学',
    '生命科学': '生命科学',
    '医学': '医学',
    '健康': '医学',
    '工程': '工程',
    '建筑': '工程',
    '汽车': '工程',
    '教育': '教育',
    '文学': '文学',
    '历史': '历史',
    '艺术': '艺术',
    '设计': '艺术',
    '社科': '社科',
    '法律': '社科',
    '公共管理': '社科',
    '职场': '通用',
    '其他': '通用',
}


def get_template_category(course_type_str):
    """根据课程类型字符串匹配最佳模板类别。"""
    if not course_type_str:
        return '通用'
    for keyword, category in TYPE_MAPPING.items():
        if keyword in course_type_str:
            return category
    return '通用'


def shuffle_question(tpl, course_name, seed_val):
    """
    基于模板生成一道题，随机打乱选项顺序以增加多样性。
    seed_val 用于确保可重现性。
    """
    rng = random.Random(seed_val)
    q_text = tpl['q'].format(name=course_name)
    opts = list(tpl['opts'])
    correct_answer_text = opts[tpl['a']]
    explanation = tpl['e']

    # 打乱选项
    rng.shuffle(opts)
    new_answer_idx = opts.index(correct_answer_text)

    return {
        'question': q_text,
        'options': json.dumps(opts, ensure_ascii=False),
        'answer': correct_answer_text,
        'explanation': explanation,
    }


def main():
    conn = pymysql.connect(**DB)
    cur = conn.cursor(pymysql.cursors.DictCursor)

    # 清除旧题目
    cur.execute("DELETE FROM course_questions")
    conn.commit()
    print("已清除旧题目。")

    # 获取所有课程
    cur.execute("SELECT course_index, name, type FROM courses ORDER BY course_index")
    courses = cur.fetchall()
    print(f"共 {len(courses)} 门课程，每门生成 10 道题...")

    insert_sql = (
        "INSERT INTO course_questions (course_id, course_name, question, options, answer, explanation) "
        "VALUES (%s, %s, %s, %s, %s, %s)"
    )

    batch = []
    total = 0

    for course in courses:
        cid = course['course_index']
        cname = course['name']
        ctype = course['type'] or ''

        category = get_template_category(ctype)
        templates = TEMPLATES[category]

        # 为这门课生成 10 道题 (模板正好 10 个)
        for i, tpl in enumerate(templates):
            seed = hash(f"{cid}_{i}_{cname}") & 0xFFFFFFFF
            q = shuffle_question(tpl, cname, seed)
            batch.append((cid, cname, q['question'], q['options'], q['answer'], q['explanation']))
            total += 1

        # 批量插入（每 500 条）
        if len(batch) >= 500:
            cur.executemany(insert_sql, batch)
            conn.commit()
            batch.clear()
            print(f"  已插入 {total} 道题...")

    # 插入剩余
    if batch:
        cur.executemany(insert_sql, batch)
        conn.commit()

    cur.close()
    conn.close()
    print(f"完成！共插入 {total} 道考研风格题目（{len(courses)} 门课程 × 10 题）。")


if __name__ == '__main__':
    main()
